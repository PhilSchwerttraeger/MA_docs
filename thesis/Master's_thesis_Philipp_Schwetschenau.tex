\documentclass[twoside, openright, 12pt]{book}
\sloppy

% Preamble
\input{other/definitions}

\begin{document}

%
% Titelseite
\begin{titlepage}
\newlength{\detailwidth}
\newlength{\detaildescriptionwidth}
\settowidth{\detailwidth}{Eingereicht:~~ Prof. Dr.-Ing. habil. Winfried E. Kühnhauser}
\settowidth{\detaildescriptionwidth}{Studies:~~} 
\begin{center}

\vfill {
	\includegraphics[width=6cm]{logo-tu-ilmenau.jpg}
	\vspace{8ex}
}

\begin{normalsize}Technische Universität Ilmenau \\
Fakultät für Informatik und Automatisierung \\
Institut für Praktische Informatik und Medieninformatik \\
Fachgebiet für Verteilte Systeme und Betriebssysteme        
\end{normalsize}


\vfill {\large
	Master's thesis\\ \vspace{2ex}
	\LARGE \textbf{Graphical Specification Language \\for the Entity-Labeling Aspect} \\ \vspace{2.5ex} 
	\normalsize Submitted by: \\
	\Large Philipp Schwetschenau \\ \vspace{3ex} 
}
\vfill \parbox{\detailwidth}{
	\makebox[\detaildescriptionwidth][r]{Supervisor:~~} Prof. Dr.-Ing. habil. Winfried E. Kühnhauser \\
	\makebox[\detaildescriptionwidth][r]{Supervisor:~~} Dipl.-Inf. Peter Amthor \\
	\vspace{2ex} \\
	\makebox[\detaildescriptionwidth][r]{Studies:~~} Computer science\\  
	\makebox[\detaildescriptionwidth][r]{Matriculation no.:~~} 46756  
	\vspace{2ex} \\
	\makebox[\detaildescriptionwidth][r]{Submission:~~} Ilmenau, 29. November 2018 (planned)
}
\vspace*{\fill}
\end{center}
\end{titlepage}

\mbox{}
\thispagestyle{empty}
\cleardoublepage

% Gliederung
\pagenumbering{roman}
\setcounter{page}{1}
\tableofcontents

% Abbildungsverzeichnis
\cleardoublepage
\listoffigures
\tocentry{List of figures}

%\listoflisting
%\tocentry{\listingname}

%
% Citing

% Author 1 et al. [1234]
%\cite{Harrison75a}

% Author 1, Author 2, Author 3 [1234]
%\cite*{Harrison75a}

% [Author 1 et al. 1234]
%\citep{Harrison75a}

% [Author 1, Author 2, Author 3 1234]
%\citep*{Harrison75a}



% Inhalts-Teil
\cleardoublepage
\pagenumbering{arabic}
\chapter{Introduction}
\label{introduction}

\section{Domain} 
\label{domain}
With the increasing number of IT systems, securing these systems became an obvious and important issue.
For this purpose many security models and model families were developed for a wide field of application domains over the last years.

Formal security models offer possibilities to analyze them concerning security properties.
However, because quantity and variety of these models grow just as much as their relevance for security-critical applications the model-based security engineering process became more complex and therefore error-prone to human deviations.

\citet*{Amthor18} proposed a new approach called Aspect-oriented Security Engineering (AOSE) which claims to close semantic gaps between steps in the security engineering process (requirements, informal policy, formal model) to reduce the potential impact of human errors.
This approach roughly adopts the idea of the aspect-oriented programming paradigm.
It tailors all steps to aspects, which are non-functional requirements of the engineering process like determining requirements of policy semantics or analyzing certain security goals.
There are two major classes for aspects regarding AOSE: related to policy semantics and to policy analysis.

One possible aspect of the former is the Entity Labeling Aspect (EL).
It is designed to formally specify policy semantics typically found in operating systems and middleware systems.
Therefore it bridges the gap and supports the transformation between informal policy and formal model.
EL classifies model components into six semantic categories.
The notation is on a mathematical basis and uses concepts like sets, assignments or constraints.



\section{Motivation} 
\label{motivation}
The goal of reducing the impact of human errors by closing semantic gaps as much as possible with the help of AOSE/EL requires handling another formal notation, which is, in this case, EL itself and its classification into the six semantic categories.
To support working with this approach, especially for the communication between different groups of people involved like model engineers, security architects, software developers or future administrators, who have to cooperate and coordinate and all have different levels of experience, \citet*{Amthor18} considers a graphical representation to be helpful to enhance the transition between informal and formalized notation.

\citet*{Amthor18} already uses visual representations to illustrate examples.
However, the representations are not described in detail as well as they are inconsistent and ambiguous regarding several parts of the formalization (e.g.\ arrows can have several meanings and there is no way to specify functions with multiple input parameters).
So these visualizations are appropriate to underline and support the engineering of an already formalized policy after EL-based model engineering, but are not suitable for independent modeling on a stand-alone level, because they are not equivalent to their formalized mathematical counterpart.

There are two types of visualization \cite{Amthor18} uses, which have different levels of abstraction: 
One is based on the actual model components and visualizes them and their relationships.
The other one is based on a higher level of abstraction and visualizes the EL with its structure of semantic categories and their relationships.

There are other visual notations like UML or ERD, which have in common that they are tailored to particular needs in special application domains, so they can not be applied here, but may give inspiration on how to model certain semantics and relationships.

Eventually to be able to independently and visually model and work on EL-based policies there is need for an unambiguous formal graphical specification language.



\section{Goal}
\label{goal}
The main goal is to develop a graphical specification language for EL-based security polices.
This should focus on clean and unambiguous semantics of the language.

The use of the language should be as simple as possible and as comprehensive as needed.
Therefore its appearance and elements should be clear and well-structured.
A selection of appropriate symbols and geometrical shapes for their equivalent model counterparts has to be made regarding an intuitive understanding and workflow.
This selection should not be designed contradictory or conflicting to already established notations, especially those, which may be used in the context of security engineering.

It should be evaluated how feasible and reasonable it is to develop equivalent counterparts for every possible element and relationship in context of EL and to display all of them at once.
This may also lead to the question how the visualization is related to a visualization on a higher abstraction level and how they are connected and might be managed.
The latter may be investigated as an optional goal.

In addition to that a GUI-based editor should be developed as a prototype to make use of the proposed graphical specification language.



\section{Structure}
\label{structure}




\cleardoublepage
\chapter{Fundamentals}
\label{fundamentals}
This chapter provides information to fundamentals necessary for this thesis.
It will serve as a basis for design decisions in the following chapter~\ref{gsl} and chapter~\ref{editor_design}.

Section \ref{security_models} introduces two fundamental families of security models: IBAC and RBAC.
It also describes a graphical notation for depicting RBAC models by \cite{Sandhu96}.
This notation will serve as first basis for graphical modeling in this domain.
Section \ref{AOSE} focuses on the Aspect-oriented Security Engineering (AOSE) proposed by \citet*{Amthor18}.
It covers the Entity Labeling Aspect in particular, one aspect of AOSE, which is going to be essential regarding the task to design a graphical specification language for it.
Also the notation used by \citet*{Amthor18} to graphically model the process of Entity-Labeling, which was inspired by the graphical RBAC notation by \cite{Sandhu96}, will be described.
This will be the starting point in designing the graphical specification language in chapter \ref{gsl}.

In section~\ref{graphical_notations} the well-established graphical notations \textit{Unified Modeling Language} and \textit{Entity-Relationship} are described.
Based on human optical perception and gestalt laws section~\ref{perception} provides information on how we perceive and evaluate optical stimuli regarding properties like shape and closeness.
In the last section~\ref{gui_design} information on how to design a software graphical user interface are given with respect to common best practices like interaction design patterns and usability.

\section{Security Models}
\label{security_models}
A \textit{security policy} is a set of rules to fulfill security related requirements of an IT system.
In order to be able to work with such a security policy and to analyze it, it has to be formalized as an instance of a \textit{security model}.
Being the central artifact in the process of model-based security engineering we want to describe a very basic security model -- the \textit{Identity-based Access Control} (IBAC) model -- and a well-established and widely used extension of it -- the \textit{Role-based Access Control} (RBAC) model.
In the course of this work, we need security policies and models to explain and visualize model-based security engineering with regard to Entity Labeling.

%\subsection{HRU}
%\label{HRU}
%The HRU security model \citep*{Harrison75a} is a fundamental, dynamic access control model.
%It manages permissions of subjects on objects with the help of an state automaton and access control matrices.
%While subjects are active (e.g. users), objects are passive (e.g. files).

%\begin{xdefinition}[HRU] 
%A HRU model is a deterministic automaton
%$(Q, \Sigma , \delta , q_{0})$ with 
%$Q = 2^S \times 2^O \times M$ as state space, 
%$M = \lbrace m|m:S \times O \rightarrow 2^R \rbrace$ as set of access control matrices, 
%$\Sigma$ as input alphabet, 
%$\delta : Q \times \Sigma \rightarrow Q$ as state transition function and 
%$q_0 \in Q$ as initial state.
%\end{xdefinition}



\subsection{Identity-Based Access Control}
\label{IBAC}
The most fundamental class of security models is probably the family of Identity-based Access Control (IBAC) models.
The model is based on a system with active (subjects) and passive entities (objects).
In IBAC requests are decided according to the unique identification of the requester and the object \citep{Lampson74}.
A set of rules (\textit{policy}) determines whether a request is permitted or forbidden.
These rules can be formulated as access control matrix (ACM) or access control function (ACF).
An ACF is defined as following \citep{Amthor18}:

\begin{definition}[Access control function]
An access control function (ACF) is a function ${acf}: S \times O \times OP \rightarrow \mathbb{B}$, where
\vspace{-2mm}
\begin{itemize}
\item $S$ is a set of \textit{subject identifiers}
\item $O$ is a set of \textit{object identifiers}
\item $OP$ is a set of \textit{operation identifiers}
\end{itemize} 
\vspace{-2mm}
For any $s \in S, o \in O, op \in OP$, we say $s$ is allowed to execute $op$ on $o$ iff $acf(s,o,op)$.
\end{definition}



\subsection{Role-based Access Control}
\label{RBAC}
With an increasing number of subjects and objects the access control functions/matrices of IBAC models get very large and hard to manage effectively.
Role-based Access Control (RBAC) models counter this scalability problem by adding one stage of indirection.
For this RBAC models extend IBAC with the concept of roles \citep{Sandhu96}.
This design decision is based on the finding of \cite{Sandhu96} that in large systems many subjects share the same access privileges.
On the one hand every user is mapped to a set of roles.
On the other hand every role is mapped to a set of permissions.
This concept reduces redundancy in systems with large or fast growing sets of subjects and objects and also models real scenarios closer to reality (e.g. job function in an organization).

\begin{xdefinition}[RBAC] 
A RBAC$_0$ model is a tuple $(U, R, P, S, UA, PA, user, roles)$ with

\vspace{-2mm}
\begin{itemize}
\setlength\itemsep{0em}
\item $U$ as set of \textit{users}
\item $R$ as set of \textit{roles}
\item $P = 2^{O \times OP}$ as set of \textit{permissions}
\vspace{-2mm}
\begin{itemize}
\item $O$ is the set of \textit{objects}
\item $OP$ the set of \textit{operations})
\end{itemize}
\vspace{-2mm}
\item $S$ as set of \textit{sessions}
\item $UA \subseteq U \times R$ as a many-to-many \textit{user-to-role assignment relation}
\item $PA \subseteq P \times R$ as a many-to-many \textit{permission-to-role assignment relation}
\item $user: S \rightarrow U$ as function, that maps every session to a single user
\item $roles: S \rightarrow 2^R$ as function, that maps every session to set of roles
\end{itemize}
\label{definition:RBAC}
\end{xdefinition}

\noindent
When a user now wants to perform an operation on an object the permission to do so is determined with the help of an access control function, similar to IBAC.
The access control function checks whether there is an active session of the user he activates a role in, which has the permission to perform the operation on the desired object (see definition \ref{definition:RBAC_ACF} below).

\begin{xdefinition}[RBAC access control function]
$\\[-15pt]
acf_{RBAC} (u,o,op) \rightarrow 
   \begin{cases}
   		\ true & |\ \exists r \in R, s \in S: \\ & \ \ u = user(s), r \in roles(s), ((o,op),r) \in PA \\
   		\ false & |\ else
   \end{cases}
$
\label{definition:RBAC_ACF}
\end{xdefinition}

\noindent
RBAC is called a family of security models, because there is a base model (RBAC$_0$) and three models that extend this base model with advanced concepts.
RBAC$_1$ extends RBAC$_0$ with a role hierarchy, because in reality it turned out that roles are often combinations of other already existing roles.
This reduces redundancy and improves RBAC's scaling behavior even further.
The role hierarchy is defined as partial order $RH \subseteq R \times R$.% on $R$. %(also written as $\geq$).

RBAC$_2$ extends RBAC$_0$ with a set of constraints $C$ to restrict values of the model components $UA, PA, user, role$ or $RH$ (e.g. ``\textit{forbid the activation of two certain roles at the same time}'').
Constraints are highly individual and specific to a certain application.
However, \cite{Sandhu96} mentions three main concepts for constraints, that seem to be used frequently and are therefore reasonable to implement: \textit{Mutually exclusive roles}, \textit{cardinality} and \textit{prerequisite roles}.

RBAC$_3$ combines the concepts of RBAC$_1$ and RBAC$_2$.

%In contrast to automaton-based security models (e.g.~HRU), RBAC is static.
%Due to not being dynamic a RBAC model can always just reflect a snapshot in time.
%A dynamic variant of RBAC was proposed by \cite{Schlegel13} and is called DRBAC.
%It combines the RBAC$_3$ model with a deterministic state automaton of the HRU model.

%\begin{xdefinition}[DRBAC] 
%A DRBAC model is a tuple 
%$(Q, \Sigma , \delta , q_{0}, OP, R, RH, C)$ with
%$Q = 2^U \times 2^O \times 2^P \times 2^S \times 2^{\mathit{PA}} \times %2^{\mathit{UA}} \times \mathit{USER} \times \mathit{ROLES}$ as state space, where $U, O, P, S, PA, UA, RH, C$ is defined just as in the RBAC$_3$ model, 
%$\mathit{USER} = \lbrace user|user: S \rightarrow U \rbrace$ as set of mappings that maps sessions to users, 
%$\mathit{ROLES} = \lbrace roles|roles: S \rightarrow 2^R \rbrace$ as set of mappings that maps sessions to roles, 
%$\Sigma = OP \times X$ as input alphabet, 
%$\delta : Q \times \Sigma \rightarrow Q$ as state transition function, 
%$q_0 \in Q$ as initial state and 
%$OP, R, RH, C$ as static component.
%\end{xdefinition}



\subsubsection{RBAC Notation by Sandhu at al.}
\label{RBAC_notation}
\cite{Sandhu96} use a graphical notation in their work to visualize the RBAC model family with all its elements and relationships (see figure \ref{fig:Sandhu_notation}).
Due to RBAC being a well-established security model and also regarding its relevance in literature -- especially for its contribution to the standardized NIST RBAC model \citep{RBACNIST} -- we want to take a closer look at its graphical notation.
Unfortunatly \cite{Sandhu96} gives no details on how or why the notation is build up the way it is in his work.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-2cm]{../figures/chapter2/Sandhu_notation.png}
	\caption{Graphical notation to visualize $RBAC_3$ by \cite{Sandhu96} }
	\label{fig:Sandhu_notation}
\end{figure}

\noindent
Following graphical elements are used in this notation:

\begin{itemize}
\item A circle or ellipse represents a set ($U, R, P, S$).
\item A rounded rectangle represents a special set -- the set of \textit{Constraints}.
\item A normal-headed unidirectional arrow represents a one-to-one assignment ($user$).
\item A double-headed unidirectional arrow represents a one-to-many assignment ($roles$).
\item A double-headed bidirectional arrow represents a many-to-many assignment relation ($UA, PA, RH$).
\item A normal-headed unidirectional dashed arrow represents a constraint.
Six arrows of this type are pointing symbolically from the set of constraints in the direction of all model components constraints can be potentially defined on.
\end{itemize}
%TODO: Better a table?

\noindent
A set has its name and its identifier in its center.
An arrow -- except the constraint arrow -- has its identifier and optionally its name next to it.

Furthermore the set \textit{Sessions S} is not directly connected with arrows to other components.
It is drawn with large black dots inside, which represent single elements of this set.
These set elements are then connected to other components with certain arrows.
Three small black dots (in this case aligned horizontally) indicate that those three set elements are just symbolic and that there are potentially more or less (the number of sessions is not limited per definition).

This diagram is often used in a simplified form (for example in \citep{Amthor18}) that does not display single set elements of \textit{Sessions S}, but directly connects \textit{Sessions S}-- like the other sets -- with just one arrow (for the \textit{user} function) to \textit{Users} and one arrow (for the \textit{roles} function) to \textit{Roles}.
Also worth mentioning is that the \textit{Role Hierarchy RH} is drawn as a loop. 
It is pointing from \textit{Roles} ($R$) to \textit{Roles} with a double-headed bidirectional arrow.

Sandhu's notation depicts the overall structure of the RBAC model with its relationships between model components.
Different arrow types indicate different types of relationships.
Besides \textit{Sessions S} no set displays any set elements.
Also no set displays any kind of definition for its elements.
For example \textit{Permissions P} does not indicate that its elements are defined as $2^{O \times OP}$ (as in the RBAC definition, see definition \ref{definition:RBAC}).

%maybe my own gsl from bachelor thesis?


%\subsection{Security Model Core}
%\label{model_core}
%Over the years many different security models emerged for special purposes and requirements.
%They heavily vary and differ in their structure and design.
%Comparing them or even parts of them for analysis or evaluation purposes is not always possible per se.
%Methods to analyze a model concerning a given security property have to be adapted to every model they should run on.
%So \cite{Poelck14} proposed the Security Model Core to describe and formalize all possible security models in one meta model in a homogeneous way.

%\begin{xdefinition}[Security Model Core]
%\label{def:SecurityModelCore}
%The Security Model Core is a 5-tuple 
%$(Q, \Sigma , \delta , q_{0}, E)$ with 
%$Q$ as state space,
%$\Sigma$ as input alphabet, 
%$\delta: Q \times \Sigma \rightarrow Q$ as state transition function, 
%$q_0$ as initial state and 
%$E$ as static extension vector.
%\end{xdefinition}

%The definition of model components depends on the specialization of the corresponding model core and is done in six steps by identifying and defining those components.



\section{Aspect-oriented Security Engineering}
\label{AOSE}
In this section the Aspect-oriented Security Engineering proposed by \cite{Amthor18} is described with focus on its Entity Labeling aspect.
The content of this section will act as fundamental basis of information for designing a graphical specification language for the Entity-Labeling aspect later in chapter \ref{gsl}.

Aspect-oriented Security Engineering (AOSE) is a new approach proposed by \cite{Amthor18} to improve the process of model-based security engineering.
With an increasing number and complexity of security models the engineering process that goes along also became more complex and therefore prone to human errors.
\cite{Amthor18} claims to close semantic gaps between model engineering, model analysis and formal policy specification in the process of security engineering to reduce the potential impact of human errors.
These three steps and how they connect are depicted in figure \ref{fig:AOSE}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter2/AOSE.png}
	\caption{Steps of model-based security engineering \citep{Amthor18}}
	\label{fig:AOSE}
\end{figure}

\noindent
AOSE roughly adopts the idea of the aspect-oriented programming paradigm.
It tailors all steps to aspects, which are non-functional requirements of the engineering process, for example determining requirements of policy semantics or analyzing certain security goals.
There are two major classes \cite{Amthor18} proposes for aspects regarding AOSE: related to policy semantics and related to policy analysis.
One of several aspects proposed in his work is Entity Labeling.

According to \cite{Amthor18} an aspect-oriented security model is defined as:

\begin{xdefinition}[Aspect-oriented security model] 
A aspect oriented security model is defined as 
\begin{gather*}
\langle \mathcal{M},\mathcal{A},sem \rangle
\end{gather*}
with:

\vspace{-2mm}
\begin{itemize}
\setlength\itemsep{0em}
\item $\mathcal{M}$ as finite set of model component identifiers
\item $\mathcal{A}$ as set of semantic category identifiers (aspect)
\item $sem : \mathcal{A} \rightarrow 2^\mathcal{M}$ as semantical application of $\mathcal{A}$ to $\mathcal{M}$
\end{itemize}
\label{definition:AOSE}
\end{xdefinition}



\subsection{Entity Labeling}
\label{EL}
The Entity Labeling (EL) aspect is one possible aspect $\mathcal{A}$ in context of AOSE (see definition \ref{definition:AOSE}).
It is designed to support the process of formally specifying policy semantics typically found in operating systems and middleware systems.
Its purpose is to support the transition from informal policy to formal model (see highlighted part in figure \ref{fig:AOSE}).

For this model components of an informally specified policy are formalized by classifying them into the six semantic categories $ES$, $LS$, $LA$, $AR$, $RR$, and $MC$:

\begin{description}
\item[1) Entity Set (ES)]\hfill \\
\textit{ES} is a set of \textit{entity} identifiers.
These are very basic elements in context of access control decisions and can be resources or principals like users or files.
%\vspace{-2mm}

%\begin{xdefinition}[ES] 
%ES model components are sets that list potential participants in access decisions.
%Elements of those sets are (1) atomic identifiers, (2) legal argument values for any authorization decision, (3) illegal argument values for evaluating \textit{AR} model components and (4) associated with labels via \textit{LA} model components.
%\label{definition:ES}
%\end{xdefinition}

\item[2) Label Set (LS)]\hfill \\
\textit{LS} is a set of legal \textit{label} values.
Labels act as attributes in access control decisions and therefore as level of indirection.
Their content varies depending on a policy's application domain.
% and can be finite enumerations (e.g.~RBAC), infinite enumerations (e.g.~ABAC) or any number system such as $\mathbb{N}$.
%\vspace{-2mm}

%\begin{xdefinition}[LS] 
%LS model components are sets that list identifiers used in entity labels.
%Elements of those sets are (1) legal attribute values in labels, (2) legal argument values for evaluating \textit{AR} model components, (3) illegal argument values for any authorization decision and (4) may be associated with labels via \textit{LA} model components.
%\label{definition:LS}
%\end{xdefinition}

\item[3) Label Assignment (LA)]\hfill \\
\textit{LA} is a set of associations between entities and labels.
%\vspace{-2mm}

%\begin{xdefinition}[LA] 
%LA model components are assignments that determine a system configuration in terms of how a policy's access rules (\textit{AR}) are applied to entities (\textit{ES}). They (1) are used to associate entity identifiers with label identifiers, (2) may be used to associate label identifiers with label identifiers and (3) indirectly determine any authorization decision.
%\label{definition:LA}
%\end{xdefinition}

\item[4) Access Rule (AR)]\hfill \\
\textit{AR} is a logical rule that defines, based on a set of entity labels, which operations may be legally performed on entities corresponding to these labels. Model components in \textit{AR} thus reflect a policy’s \textit{access control function}.
%\vspace{-2mm}

%\begin{xdefinition}[AR] 
%\textit{AR} model components are logical rules which (1) are evaluated using label identifiers and (2) directly determine any authorization decision.
%\label{definition:AR}
%\end{xdefinition}

\item[5) Relabeling Rule (RR)]\hfill \\
\textit{RR} is a logical rule for legal label changes.
Label changes can emerge from either administrative accesses (e.g.~RBAC's \textit{UA}) or discretionary accesses (user owns files and grant roles/users access).
%\vspace{-2mm}

%\begin{xdefinition}[RR] 
%\textit{RR} model components are logical rules which (1) define relations between \textit{ES} or \textit{LS} model components and (2) restrict changes of \textit{LA} model components.
%\label{definition:RR}
%\end{xdefinition}

\item[6) Model Constraints (MC)]\hfill \\
\textit{MC} is a set of constraints over model components that must be satisfied at all time.
There are two types of constraints: policy-intrinsic (related to variables managed inside the AC system) and policy-extrinsic (related to external variables, e.g.~time).
%\vspace{-2mm}

%\begin{xdefinition}[MC] 
%MC model components are boolean expressions or external variables. 
%They represent conditions which (1) may relate to all model components (including external variables), (2) must be satisfied by the values of all model components (excluding external variables) and (3) must be satisfied after any change of the model components.
%\label{definition:MC}
%\end{xdefinition}
\end{description}

%\noindent
%According to these categories EL is defined as following:

%\begin{xdefinition}[Entity Labeling aspect] 
%The Entity Labeling aspect of a security policy is defined as:
%\begin{gather*}
%\mathcal{A}_{EL} = \lbrace ES,LS,LA,AR,RR,MC\rbrace
%\end{gather*}
%where $ES$, $LS$, $LA$, $AR$, $RR$, and $MC$ denote categories of model components defined as in definitions \ref{definition:ES} to
%\label{definition:EL} \ref{definition:MC}.
%\end{xdefinition}

\noindent
The resulting model after EL can be depicted in three different forms: Textual, table and graphical.
The textual form created from an example policy looks like this:

\begin{align*}
\langle &\mathcal{M}_{example}, \mathcal{A}_{EL}, sem \rangle
\end{align*}
\begin{align*}
\mathcal{M}_{example} &= \lbrace U, D, R, GR, AR, P, ua, da, pa \rbrace
\end{align*}
\begin{align*}
sem(ES) &= \lbrace U, D \rbrace\\
sem(LS) &= \lbrace R, P \rbrace\\
sem(LA) &= \lbrace ua, da \rbrace\\
sem(AR) &= \lbrace pa, P \rbrace\\
sem(RR) &= \lbrace GR, AR, ua \rbrace\\
sem(MC) &= \lbrace \emptyset \rbrace
\end{align*}

\noindent
Figure \ref{fig:EL_table} shows the same result as table.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-3cm]{../figures/chapter2/EL_table.png}
	\caption{Result of EL-based model engineering \cite[p.77, table 4.1]{Amthor18}}
	\label{fig:EL_table}
\end{figure}

\noindent
The first column contains the EL categories.
The second column shows all given informal model components.
They are classified into the EL categories by assigning them into the corresponding row.
In the third column those model components are formalized as sets, mappings, relations, etc.
The last column refers to the corresponding informal rule of the example policy the model components originate from.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-6cm]{../figures/chapter2/EL_diagram.png}
	\caption{Visual summary of figure \ref{fig:EL_table} \cite[p.76, figure 4.3]{Amthor18}}
	\label{fig:EL_diagram}
\end{figure}

\cite{Amthor18} also used a graphical depiction (see figure \ref{fig:EL_diagram}) that is loosely based on the notation by \cite{Sandhu96} (see section \ref{RBAC_notation}).
In this diagram members of EL categories are visually classified by being horizontally aligned to a category space.
The category spaces are indicated with dashed lines at the bottom of the diagram.

As in the RBAC notation (see section \ref{RBAC_notation}) circles are used to depict sets.
Subsets are depicted as smaller circles inside their supersets.
Simple one-headed arrows depict mappings.
Arrows are drawn between members of \textit{ES} or \textit{LS}.
They just indicate a direction and not any properties or typing of the given relationships.
In figure \ref{fig:EL_diagram_m} there is also a double-headed arrow for depicting a relation (again analogue to the RBAC notation).

In contrast to its graphical origin -- the RBAC notation by \cite{Sandhu96} -- this notation is tailored specifically to the domain of EL.
It roughly takes the graphical elements of the RBAC notation, simplifies them to some degree (less arrow head types, ignoring set elements) and extends the system with dashed sections to indicate its EL categories.
However this notation is imprecise and ambiguous to some extent.
This especially becomes evident when comparing the notation to ELs table form.

The initial motivation for proposing the EL aspect was to support security engineering, e.g. by improving the communication between different people involved in the process.
This can be achieved by using a graphical notation, but will not be any useful support, when the notation is not defined unambiguously and consistently.
In chapter \ref{gsl} we will start off with this notation and try to identify its problems to create a more powerful notation system.

\subsection{Hierarchical Entity Labeling}
\label{HEL}
To further improve scalability another level of indirection can be iteratively added to an EL model that already has one level of indirection (e.g. adding a role hierarchy like RBAC has).
For this additional \textit{LS} and \textit{LA} components are added to the EL categories.
In this context $m$ indicates the degree of indirection.
For $m>1$ the EL aspect is defined by \cite{Amthor18} as:

\begin{align*}
\mathcal{A}_{EL(m)} = \lbrace ES,LS_1, \dots,LS_m, LA_1, \dots, LA_m,AR,RR,MC\rbrace
\end{align*}

\noindent
Adding a role hierarchy to our example policy from above will alter $sem(LA)$ to $sem(LA_1)$ and $sem(LS)$ to $sem(LS_1)$ and will add following two assignments:

\begin{align*}
sem(LS_2) &= \lbrace R \rbrace\\
sem(LA_2) &= \lbrace RH \rbrace\\
\end{align*}

\noindent
This leads to a diagram with an additional component $RH$ and multiple sections for $LS_i$ and $LA_i$ as depicted in figure \ref{fig:EL_diagram_m}.
The category spaces at the bottom are now not the only indications for categories in this diagram.
$LA_2$ and $LS_2$ are depicted as dashed rectangles within the diagram itself and frame its components $RH$ and $R$.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-6cm]{../figures/chapter2/EL_diagram_m.png}
	\caption{Visual summary with $m=2$ (not showing \textit{AR} and \textit{GR}) from \cite[p.79, figure 4.4]{Amthor18}}
	\label{fig:EL_diagram_m}
\end{figure}



\section{Graphical Notation Models}
\label{graphical_notations}
In this section two well-established graphical notation models are presented: UML and ER.
Due to being standard and de facto standard, they have a high relevance in the domain of graphical modeling. 
UML and ER come with reasonable concepts to illustrate structural information and semantic properties (for types of information visualization in science see section \ref{perception}), which serve as helpful pool for designing a graphical notation.

\subsection{Unified Modeling Language}
\label{UML}
The \textit{Unified Modeling Language} (UML) is a graphical modeling language to specify, visualize, design and document software \citep{UML_OMG}.
UML became a widely used tool in software development and was standardized by The Object Management Group in 1997 and also was approved as official ISO standard in 2005 \citep{UML_ISO}.

%UML defines terms and relationships between those terms, as well as a graphical notation for those.
The current version of UML (2.5) contains 14 different types of diagrams.
Every diagram illustrates information according to one specific aspect.
UML diagrams are classified into static and dynamic types, but they can have fuzzy borders and mixed forms as well.
Static diagram types describe structural properties, dynamic diagram types behavioral properties.



\subsubsection{Components}
Components an UML diagram is build up with are classified into \textit{elements} and \textit{relationships}:

\begin{description}
\item[1) Elements]\hfill \\
Elements are the main artifacts in an UML diagram.
Graphically elements are based on closed shapes like boxes or ellipses.
They usually have a name or identifier in form of text in the center of their shape. Horizontal lines can be used to separate an element into two or more sections (see \textit{class} element in figure \ref{fig:UML_elements}). \\
%Examples for elements are classes, packages, ports, etc.~(see figure \ref{fig:UML_elements}).
%Elements can be closely tied to specific diagram types (e.g.~components to component diagrams).

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter2/UML_elements.png}
	\caption{Selection of UML elements}
	\label{fig:UML_elements}
\end{figure}

%\noindent 
%Some elements can have multiple forms.
%For example the class element has a simple symbolic form as well as an extended form with detailed information (see figure \ref{fig:Class}).
%With this option whole diagrams can be dynamically adjusted to a desired level of detail.
%
%\begingroup
%\leftskip10em
%\begin{figure}[htb]
%	\centering
%	\includegraphics[width=\linewidth]{../figures/chapter2/UML_Klassen2.png}
%	\caption{Class diagrams with different level of detail}
%	\label{fig:Class}
%\end{figure}
%\par
%\endgroup

\item[2) Relationships]\hfill \\
Relationships can connect two or more elements.
Graphically relationships are lines.
Optionally they can have a shape at one end to indicate a direction.
They can vary in form by having differently drawn lines (solid, dashed) or shaped arrow heads (see figure \ref{fig:UML_relationships}).
They preferably run in $90^{\circ}$ or $45^{\circ}$ angles.
Lines do not collide if possible. \\
%Examples: Dependency, generalization, include (see figure \ref{fig:UML_relationships})

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter2/UML_relationships.png}
	\caption{Selection of UML relationships}
	\label{fig:UML_relationships}
\end{figure}
\end{description}



\subsubsection{Additional Annotations}
\label{UML_additional_annotations}
UML has symbols and textual identifiers to visualize special properties.
With \textit{multiplicities} an element can be constrained regarding its number in context of an relationship.
The notation is placed at the connection point of class and relationship component.
In almost all cases it is depicted as integer number (0 or 1) or * to indicate a boundless interval.

Furthermore it is worth mentioning that UML does not use any color for its diagrams.
This makes it compatible, easy and fast for hand-drawing.
Coloring remains a not officially specified option to highlight certain parts of a diagram, e.g. to set a focus without being in conflict with any already colorized sections of the model.


\subsection{Entity-Relationship Model}
\label{ER}
The entity-relationship model (ER) is a model to describe classified objects (entities) and how they are interrelated.
It was developed to illustrate information in databases on a conceptual level and became a popular tool for requirement analysis in this domain.
In contrast to UML (see section \ref{UML}) ER only has one type of diagram: The Entity-Relationship diagram (ERD).
Also unlike UML ER is not an officially specified standard.
ER has different notation variants, which will be depicted in section \ref{ERD_notations}.
Figure \ref{fig:ERD_minimal_example} shows an example of an ERD.

\vspace{4mm}
\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter2/ERD_minimal_example.png}
	\caption{ERD example}
	\label{fig:ERD_minimal_example}
\end{figure}

\subsubsection{Components}
ERDs are build up with the following components \citep{Kleuker11}:

\begin{description}
\item[1) Entity type]\hfill \\
The most important artifact of ER is the entity.
It represents an individual unambiguously identifiable object.
An entity is characterized by its properties.
An \textit{entity type} is a template for entities that summarizes all their attributes.
Entities can be interpreted as instances of entity types with concrete values.
Graphically an entity type is a rectangle with a name inside.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter2/ERD_entity.png}
	\caption{Entity object of an ERD}
	\label{fig:ERD_entity}
\end{figure}

\item[2) Relationships]\hfill \\
Relationships can connect two or more entities and describe how they are interrelated.
In contrast to UML relationships additionally have a rhombus shape with its name inside.
This rhombus is then connected to two or more entities with lines.
A line can hold a symbol at its end to indicate a property of the connected entity in context of the relationship.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter2/ERD_relationship.png}
	\caption{Relationship object of an ERD}
	\label{fig:ERD_relationship}
\end{figure}

\item[3) Attributes]\hfill \\
Attributes are properties of entites or relationships.
Graphically an attribute is a single ellipse with its name in its center.
It is connected to an entity or to a relationship with simple lines.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter2/ERD_attribute.png}
	\caption{Attribute object of an ERD}
	\label{fig:ERD_}
\end{figure}
\end{description}

\subsubsection{Additional Annotations}
\label{ER_additional_annotations}
To specify the amount of entities in context of a relationship the following indicators for \textit{cardinalities} are used:

\begin{itemize}
\setlength\itemsep{0em}
\item \textbf{1} to indicate a relationship to exactly one entity.
\item \textbf{c} to indicate a relationship to no or one entities.
\item \textbf{n} to indicate a relationship to one or multiple entities.
\item \textbf{nc} to indicate a relationship to no, one or multiple entities.
\end{itemize}

\noindent
%Cardinalities can be upper case (N) or lower case (n) with no semantic difference.
A relationship can be read in two directions.
For example the \textit{orders}-relationship in figure \ref{fig:ERD_minimal_example}:

\begin{itemize}
\setlength\itemsep{0em}
\item An order is connected to exactly one client (left-to-right).
\item A client is connceted to no, one or multiple orders (right-to-left).
\end{itemize}

%An entity type needs to have a \textit{primary key} defined in order to have its elements unambiguously identifiable.
%The primary key is an attribute or a combination of attributes of the entity type and has to be unique among all other attribute values.
%A primary key attribute is graphically indicated with an underlined name (see \textit{ClientID} in figure \ref{fig:ERD_minimal_example}).

%Besides this basic system, ERDs can indicate some additional information.
%For example besides those elements described above, there are variants of them with a double frame line to indicate a \textit{weak} property (no primary key, dependent to parent elements) or a dashed frame line to indicate a \textit{multivalued} property.
%In context of this work those will not be relevant.

\noindent
The idea of ERD annotations is suitable solution to graphically model a special aspect or property in context of a relationship between elements.
This concept will be adopted later in chapter \ref{gsl}.



\subsubsection{ERD Notation Variants}
\label{ERD_notations}
As already mentioned ER is not standardized and has different notation variants.
These variants only differ in the depiction of their relationships (see figure \ref{fig:ERD_notations}).

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth+0.3cm]{../figures/chapter2/ERD_notations.png}
	\caption{ERD notation variants}
	\label{fig:ERD_notations}
\end{figure}

% ERD as UML
Notable is also that an ER model can be visualized with the help of UML.
When entity types are treated as classes, entities as objects, relationships as associations, attributes as instance variables and cardinalities as multiplicities an UML \textit{class diagram} can be used to build up a diagram that is similar to an ERD.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth+0.2cm]{../figures/chapter2/ERD_as_UML.png}
	\caption{ERD modeled as UML class diagram}
	\label{fig:ERD_as_UML}
\end{figure}

%\noindent
%As seen in figure \ref{fig:ERD_as_UML} the diagram visually differs from the diagram in figure \ref{fig:ERD_minimal_example}, but can depict the information even more compact.
%However, there is no common way for indicating an entity type's primary key in UML (the UML extension concept of \textit{stereotypes} can be used for this).



\section{Perception}
\label{perception}
This section is about the human visual perception.
Its content will act as fundamental basis for designing a graphical specification language in chapter \ref{gsl} as well as for designing an editor's graphical user interface in chapter \ref{editor_design}.

In science there are two types of visualizing information:
One is to present absolute or relative primitive values (tables, bar graphs, pie charts) and one to depict structural information and semantic properties (specialized graphical systems like the class diagram of UML or the Chen notation of ERD).
Designing a new system of the latter should consider design guidelines and rules of best practice to visually support working with it.
One of these are gestalt laws.

\subsection{Gestalt Laws}
\label{gestalt_laws}
Gestalt laws (from German \textit{Gestalt}: shape, form) are derived from findings in the human perception of visual content.
They describe phenomena of how we perceive and evaluate objects and groups of objects in context to each other intuitively.

These laws apply in particular when we look at graphical user interfaces (\textit{GUI}), graphs or diagrams.
They can describe how and why we look at certain aspects first or find some aspect more easy or hard to understand than another.
Considering gestalt laws while designing any graphical content can help improving its visual quality and solving graphical problems and therefore also enhance the handling for its readers or users.

Given that there is a large number of various gestalt laws, the following list (based on \citep{Goeckel01a}, \citep{Heinecke04a} and \citep{Sternberg}) describes some of them that are relevant for the task of designing a graphical specification language in chapter \ref{gsl}:

\begin{description}
\item[1) Law of Prägnanz]\hfill \\
The Law of Prägnanz (German for \textit{pithiness}) is the fundamental principle of gestalt laws.
It says that humans tend to order inputs of their senses in the best possible way (simple, regular, symmetrical).
This results in phenomena like completing incomplete forms or favoring closed objects or treating groups of objects as units.

\item[2) Law of Proximity]\hfill \\
Objects that are closer together are not associated individually but as groups.
Smart utilizing this law offers opportunities to design visually separated sections without the help of any lines or boxes.

\item[3) Law of Similarity]\hfill \\
Homogeneously depicted objects are associated as belonging together, although they may not be in close range to each other.
This effect can be induced by \textit{Gestalt factors} like shape, color, brightness, size, orientation or rotation.
%This law allows classifying or logically grouping multiple spatially distributed objects.

\item[4) Law of Good Gestalt]\hfill \\
While looking at complex structures of objects, details are ignored and objects will always be perceived in the most simple, regular and symmetric pattern they will form.

\item[5) Law of Good Continuation]\hfill \\
Two overlapping objects are often perceived as uninterrupted.
This law allows straight lines to intersect without any confusion.
\end{description}



\subsection{Human Optical Perception}
\label{human_optical_perception}
\textit{Semiosis} is the science of signs.
It deals with analyzing signs and how they transport information \citep{Zeckzer14a}.
Semiosis differentiates between \textit{sensory symbols} and \textit{abstract symbols}.
Sensory symbols are based on biologically preset perception processes and can be recognized without any additional information (e.g.~the shape of a human body).
Abstract symbols can be chosen freely and have to be learned, because they have no relation to its reference (e.g.~the mathematical sign for infinity $\infty$).
Software applications use sensory symbols to make its functions independent from text (and therefore a specific language).
Besides sensory symbols also abstract symbols have established for common actions (e.g.~\textbf{+} to add, \textbf{-} to remove, \textbf{ \underline{ }} to minimize, \textbf{$\times$} to close, etc.)

\cite{Zeckzer14a} describes that humans are able to hold 3 to 7 elements in their visual buffer inside their short term memory.
This buffer size limits our processing capacity and visual awareness.
Handling more than this number of symbols will result in understanding a graphical system more ineffectively.

According to \cite{Ware04a} optical stimuli are perceived and processed in three consecutive steps with differently set priorities depending on their content:

\begin{description}
\item[1) Parallel processing to extract low-level characteristics]\hfill \\
In this first step inputs are processed in parallel by millions of neurons in high speed.
The inputs are then evaluated regarding their orientation, movement and overall color impression.

\item[2) Perception of pattern and structures]\hfill \\
In this second step the picture gets separated into regions.
Simple structures like contours, colors and textures get recognized.
Object recognition begins.

\item[3) Sequential target-oriented processing]\hfill \\
In this last step single recognized objects get selected and stored in the short term memory.
There they are ready for further processing, e.g.~applying of knowledge or emotions.
\end{description}



\section{GUI Design}
\label{gui_design}
The \textit{graphical user interface} (GUI) is a well-established interface type that allows interactions between human and machine on a graphical level.
It presents visual content to its users and offers functions to operate with the help of symbols and control elements.
GUIs were developed, because text-based \textit{command line interfaces} (CLI) need a higher degree of memorization and familiarity for operation and navigation and therefore new users in particular find operating a CLI more difficult than a GUI \citep{CLI}.
Unfortunately GUI design often lacks ease of use, due to its design being tied too strictly to the work flow of experts \citep{Reckling14}.

There are some best practices to stick to when it comes to design a \textit{good} GUI.
One of them is to reuse already established methods and approaches like \textit{user interface pattern}.
Another one is to evaluate whether a design concept follows \textit{usability} rules.



\subsection{Usability}
\label{usability}
\cite{Shackel91a} defines usability as following:

\begin{xdefinition}[Usability] 
Usability is the capability to be used by humans easily and effectively, while
\begin{itemize}
\item \textit{easily} means ``to a specified level of subjective assessment'' and
\item \textit{effectively} means ``to a specified level of (human) performance''
\end{itemize}
\label{definition:usability}
\end{xdefinition}

\noindent
Usability can be classified into \textit{interaction design} and \textit{interface design}.
The former describes \textit{how} a system reactions to user interactions, the latter \textit{with what} a system visualizes interaction options \citep{Reckling14}.

\cite{Tidwell11} describes several principles essential for achieving a high usability.
These principles can be applied in form of non-functional requirements in the process of designing a new GUI.
The following list describes the first 6 of those principles:

\begin{description}
\item[1) Safe Exploration]\hfill \\
A user should always be able to safely explore the interface.
This includes undoing every operation he performs in particular.
%For this a software has to be designed as \textit{non-destructive} as possible.

\item[2) Instant Gratification]\hfill \\
A user should always instantly get feedback about operations he just performed.
This can be the direct result of his operation (e.g.~opening a window) or a visual hint, that an operation was executed as desired (e.g.~coloring an activated button).

\item[3) Satisfiscing]\hfill \\
\textit{Satisfiscing} (\textit{satisfying} and \textit{sufficing}) is the phenomenon that a user tends to scan all options just roughly and to use trial-and-error before finding the perfectly matching tool for a certain task.
He tends to be fine with solutions that are \textit{good enough} and not the best possible.
This means that the user should be supported to find the right tools when he needs them.
%For this symbols and texts have to be short, simple and easy to understand.
Elements and symbols already known should be reused when possible.
Also to ensure a correct order of operations or work flow (if necessary at all, see point 6 of this list) the user should be guided appropriately (e.g.~\textit{drag here}).

\item[4) Changes in Midstream]\hfill \\
A user should always be able to interfere with running operations to always have the control (e.g. a time consuming operation indicated with a progress bar together with a cancel button underneath).

%\item[5) Deferred Choices]\hfill \\
%A user should always be able to defer choices that are not mandatory and answer just the minimal set of questions that are necessary to progress at a certain point.
%Of course, besides this, the system has to offer a way for the user to come back to answer the skipped questions later.

\item[5) Incremental Construction]\hfill \\
Builder-style software like editors need to support \textit{incremental construction}.
This means that the user is free to choose on which particular part he wants to works.
A user should always be free to stop working on one part and instantly jump to another part to continue working there.
When this \textit{incremental construction} is achieved to a high degree, this can induce a state of flow in the user, which leads to an increased working performance and satisfaction.
\end{description}


\subsection{Interaction Design Patterns}
\label{design_patterns}
A GUI has to be designed a way it can be operated mostly intuitively.
This means that a user should find his way without knowing a new application.
This can be achieved by reusing graphical control elements and functions that are already well-established and known from working with other software's GUI.
These elements can be recognized by their similar visual appearance and will always work in a similar known way.
These elements are called \textit{interaction design patterns}.

An interaction design pattern is defined by \cite{Folmer} as a general repeatable solution to a commonly-occurring usability problem in \textit{interface} or \textit{interaction design}.
Interaction design pattern can be graphical elements like buttons, menus or scroll bars as well as control functions like drag and drop, swipe gestures or context-menu by clicking the mouse button.

Whenever these patterns fit, they should be applied.
Reinventing interaction design is not only very time consuming, but actually even counterproductive concerning usability due to users will get discouraged by being confronted with new unknown mechanisms (see section \ref{usability} \textit{satisfiscing}).





\cleardoublepage
\chapter{Design: Graphical Specification Language}
\label{gsl}
In this chapter we develop a notation to graphically model the Entity Labeling aspect (see section \ref{EL}) of Aspect-oriented Security Engineering.
In the first section \ref{gsl_concept} the general idea and approach for this are explained.
In this context the notation used by \cite{Amthor18} is investigated regarding its inconsistency and general weaknesses.
5 problems are going to be isolated and described in detail.
Afterwards possible solutions for these problems are proposed to extend and improve the notation with regard to design goals.
In section \ref{gsl_elements} all graphical elements developed are then depicted visually and described regarding their form, function and usage.
Finally section \ref{gsl_example} depicts and describes a full practical example for EL modeling and illustrates all changes and improvements to its original notation form.



\section{Concept}
\label{gsl_concept}
%approach, basic ideas, adoptions from literature

Due to being highly tailored to one specific domain, established graphical notations for structural or semantic properties like UML or ER (see section \ref{graphical_notations}) are impractical for direct reuse in other domains.
A new concept like EL generally requires a newly designed graphical notation.
In reality needed elements, concepts and ideas are not always created from scratch, but are getting (partly) adopted from related systems and adapted accordingly as long as they syntactically and semantically fit.
With or without adoption: The system should be designed in a way its components are unambiguous to components of systems from similar or related domains to avoid misunderstanding or barriers in learning.
With this said we want to start off with the graphical notation \cite{Amthor18} uses to visualize the EL aspect and try to analyze and expose its problems in section \ref{analyzing_notation} and to propose matching solutions in section \ref{improving_notation}.

\begin{mdframed}[style=mystyle,frametitle=Note]
Henceforth all possible connections between sets like mappings, relations, constraints, etc.~are referred to as \textit{relationships} (hypernym).
\end{mdframed}



\subsection{Analyzing the EL Notation used by Amthor}
\label{analyzing_notation}
The major problem with the graphical EL notation by \cite{Amthor18} is that it is not isomorphic to its non-graphical counterpart.
This specifically applies to the information loss induced by ambiguously depicted relationships between elements and the inconsistent method of classifying elements.
So the first design goal for the graphical specification language is \textit{isomorphism}.
For achieving this several elements have to be added, while others have to be extended.
In the following we want to isolate and describe five problems in this context:

\vspace{6mm}
\noindent
\textbf{Problem 1: Power Sets}
\vspace{1mm}

\noindent
When comparing the visual summary (figure \ref{fig:EL_diagram}) with the table form (figure \ref{fig:EL_table}) we find several inconsistencies.
One is that all mappings in the visual summary ignore the presence of power sets.
For example $ua: U \rightarrow 2^R$ is drawn as a simple arrow from $U$ to $R$.
It depicts the participants in the mapping, but not the exact set expressions.
This inconsistency (loss of information) becomes clear in particular after converting the graphical statement back to a mathematical one:
\begin{align}
(U \rightarrow 2^R) \not\equiv (U \rightarrow R)
\end{align}



\vspace{4mm}
\noindent
\textbf{Problem 2: Set Operators}
\vspace{1mm}

\noindent
Relations and mappings can use sets as well as combinations of multiple sets.
These combinations are expressed with set operators (for example the cartesian product $\times$).
\cite{Amthor18} depicts one of these graphically in figure 5.1 (page 140, \citep{Amthor18}).
For simplicity and as base for further discussion we construct a minimal example: A mapping that takes a subject's and an object's identification to decide whether a user access is allowed on an object or not:
\begin{align}
S \times O \rightarrow 2^R
\end{align}

\noindent
In the graphical notation we have a line from $S$ and $O$, merging in one point and ending with an arrow head in $R$ (figure \ref{fig:inconsistent_two_arguments}).
Unfortunately this is not sufficient in terms of consistency, because the type of operation is not specified.
The set operator, that determines how two sets interrelate, can vary (here: $\times$, but may be $\cup, \cap$ or $\setminus$ just as well).

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-10cm]{../figures/chapter3/inconsistent_two_arguments.png}
	\caption{Ambiguous attempt to depict a mapping with two input operands}
	\label{fig:inconsistent_two_arguments}
\end{figure}



\vspace{4mm}
\noindent
\textbf{Problem 3: Order of Operations and Sets}
\vspace{1mm}

\noindent
Besides that, when handling two or more sets the order of set operations (may be mathematically indicated with brackets, see equation \ref{eq:order_operations}) and the order of sets participating in one particular set operation (see equation \ref{eq:order_arguments}) are relevant and thus have to be considered and depicted as well:
\begin{equation}
\begin{gathered}
((A \cap B) \cup C \rightarrow D) \not\equiv
(A \cap (B \cup C) \rightarrow D)
\end{gathered}\label{eq:order_operations}
\end{equation}
\vspace{-8mm}
\begin{equation}
\begin{gathered}
(A \setminus B) \not\equiv (B \setminus A) 
\end{gathered}\label{eq:order_arguments}
\end{equation}



\noindent
\textbf{Problem 4: Categorization}
\vspace{1mm}

\noindent
The EL categories are depicted by \cite{Amthor18} with dashed spaces at the bottom of a figure.
These allow categorizing by horizontally aligning elements into sections.
Additionally elements can be categorized by surrounding them with a dashed box (e.g.~\textit{R} in $LS_2$ in figure \ref{fig:ambiguous_categorization}).
The horizontal alignment seems similar to a table categorization with columns, but unlike a table the graphical depiction uses arrows that connect elements to indicate a relationship between them.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-8cm]{../figures/chapter3/ambiguous_categorization.png}
	\caption{Ambiguous categorization of the relation RH}
	\label{fig:ambiguous_categorization}
\end{figure}

\noindent
When connecting two elements, which are positioned in different sections, arrows inevitably run through all sections lying between those sections.
Due to arrows not always connecting elements across just two sections, it is possible that they connect elements that are further away from each other or elements that belong to the same section.
For example in figure \ref{fig:ambiguous_categorization} \textit{RH} is placed above $R$, because it is no member of one of the horizontally adjacent categories of $LS_1$ ($LA_1$ and $AR$); nevertheless it is incorrectly associated with $LS_1$ due to its horizontal alignment.
As a result arrows will always be automatically associated with

\begin{enumerate}[label=\alph*)]
\item (all) categories lying between elements they connect, when those elements are members of different categories or 
\item the category of a single element, when the relationship is a loop
\end{enumerate}

\noindent
which is both unpreventable and undesired in many cases.

But not just arrows, also \textit{sets} have a similar issue, because they can be member of multiple categories at once.
In figure \ref{fig:ambiguous_categorization} we can construct such situation by adding a new element $E$, which is member of $LS_1$ and of a new category $C$, that is not horizontally adjacent to $LS_1$, but left to $LA_1$ or right to $AR$.
In this scenario there would be need to depict $E$ two times at once (in $LS_1$ and $C$), which makes the figure redundant and thus confusing, especially for the activity of iteratively developing a model, which is the major task EL was actually designed for to support.\\



\vspace{6mm}
\noindent
\textbf{Problem 5: Visual Complexity}
\vspace{1mm}

\noindent
While the previous four problems are related to the first design goal of achieving isomorphism, this problem derives from the actual design stage of the language.
It appears that the modular approach we are going to use can generate quite large graphical models.
It may happen that a user wants to model certain parts of the model less prominent than others to keep the focus on important parts.
So for reducing the visual complexity whenever needed, and for offering the user the choice how prominent certain parts should be depicted, there is need for a concept for depicting information in an adaptive way.
This is the secondary design goal of the graphical specification language.



\subsection{Improving the EL Notation used by Amthor}
\label{improving_notation}
\vspace{2mm}
\noindent
\textbf{Solution to Problem 1: Power Sets}
\vspace{1mm}

\noindent
Other than problem 2, power sets are applied to just one set.
To express them we introduce \textit{relationship annotations}.
These are positioned at the connection points of sets and relationships, simliar to UML's multiplicities (see section \ref{UML_additional_annotations}) or ERD's capacities (see section \ref{ER_additional_annotations}).
Unlike their semantics in UML or ERD, these relationship annotations do not indicate the amount of elements participating in a relationship, but a specific form of an element in context of a relationship it is part of.
Just like UML/ERD the mathematical expression ($2^X$) is depicted directly as textual expression without any additional graphical elements or symbols.

At this level of detail specifying special graphical elements (e.g.~special arrow heads) is not reasonable due to the high amount of different elements existing (also with regard to solution to problem 2).
This may be even counter-intuitive, because humans are able to hold up to 7 different elements in their visual buffer at once; beyond that learning/working becomes harder due to constantly swapping information between cerebral areas (see section \ref{human_optical_perception} about human optical perception).

\vspace{2mm}
\noindent
\textbf{Solution to Problem 2: Set Operators}
\vspace{1mm}

\noindent
The second extension is the \textit{operation indicator}, which allows specifying an operator for operations with at least two operands.
In the notation \cite{Amthor18} uses, relationships do not specify any operator between elements, just the relationship type by different arrows (mapping, relation, constraint).
Therefore relationships are depicted incompletely.
Again, as already stated in solution to problem 1, it does not seem reasonable to introduce new graphical elements to indicate the operator at this level of detail and with that amount of different possible types.
Again we use the textual mathematical expression/symbol.
To avoid proximity and overlapping conflicts the operator is encapsulated in a graphical shape: a rhombus (based on ERD relationships, see page \pageref{fig:ERD_relationship}).
This graphical element is the logical center and connection point for all arrows and lines from and to elements participating in this relationship.



\vspace{2mm}
\noindent
\textbf{Solution to Problem 3: Order of Operations and Sets}
\vspace{1mm}

\noindent
The order of operations can be easily depicted by \textit{cascading} operator elements introduced above.
In rare cases also the order of sets participating in \textit{one} operation is relevant for the operation itself (e.g.~$\setminus$ for set substraction).
To indicate and determine the order of sets \textit{roman numerals} can be used as additional annotations, when needed.



\vspace{4mm}
\noindent
\textbf{Solution to Problem 4: Categorization}
\vspace{1mm}

\noindent
To counter the problem of ambiguously categorization we need a better way to depict category memberships.
Unfortunately -- as observed above -- falsely categorized elements are unavoidable with the method of horizontally aligning elements.
Expanding the method into two dimensions will not solve this issue either, because it does not change the situation of falsely associated elements with spatially aligned categories.
Therefore aligning elements along one (or two) axis is not suitable for this task of categorization.

Abandoning the idea of horizontal aligning still leaves the option to use dashed rectangles to categorize elements.
In the worst case this would lead to every item being encapsulated into its very own rectangle.
This would add multiple new elements and makes it unnecessarily hard to oversee all members of one category.

As described in section \ref{gestalt_laws} \textit{gestalt laws} can help to solve graphical-based tasks.
The method of categorizing by horizontally aligning elements utilizes the \textit{law of proximity}, but due to elements being potentially widely distributed the \textit{law of similarity} seems more suitable for this task instead.
According to the law objects can be logically grouped, although they may not be in close range to each other, with the help of \textit{gestalt factors}.
The gestalt factor \textit{shape} is already reserved for depicting an element's type, \textit{brightness} may be too subtle, \textit{size}, \textit{orientation} and \textit{rotation} impractical.
But \textit{color} seems to be a suitable solution.
Coloring can indicate an element's classification without proximity, aligning or altering its shape and is applicable to sets (circles, ellipses) as well as to relationships (arrows, lines).
Also multiple category memberships can be depicted by multi-coloring enclosed areas of elements.
%This will be beneficial in particular when depicting models with multiple levels of indirection (see hierarchical EL in section \ref{HEL}), due to elements potentially having multiple memberships.

In domains where colors are not available (hand drawing, monochrome print) hachures must be utilized to indicate category memberships.
Although we now use coloring (alternatively hachures), elements can be still arranged in groups (horizontally, vertically, freely) to support the perception of belonging together as far as the structure of a concrete model does allow that.



\vspace{4mm}
\noindent
\textbf{Solution to Problem 5: Visual Complexity}
\vspace{1mm}

\noindent
We introduce two methods to vary and adapt the visual complexity:

\begin{description}
\item[1) Annotations versus Rhombus Shapes]\hfill \\
Solution to problem 2 also allows expressing a power set (with an appropriate symbol inside its shape e.g.\ $\euscr{P}$).
Together with annotations from solution to problem 1 we have two methods of depicting power sets.
This offers options to express power sets differently.
The decision may vary from element to element and comes with individual benefits.
While using annotations is more space-saving and compact, the rhombus shape can act as its own entity and multiple other relationships can refer to it (without using annotation duplicates for every single relationship).
A good rule of thumb would be to decide based on the number of references a power set has: annotation for one reference, rhombus element for two or more references.

\item[2) Set Formula versus Graphical Depiction]\hfill \\
Set's internal composition can be depicted as textual formula or as subset depiction inside its shape, but can also be graphically modeled outside of it with a combination of other elements.
Similar to the first method this offers the option to adjust the desired level of detail.
Also the individual benefits of the single-use compact form (formula/subset form) versus the multi-referenceable entity (graphical depiction with elements) from above are similar here.

Note that the formula can neither indicate element's category memberships nor can be referenced by other elements in the mode.
So it is not as expressive as its counterpart and therefore not isomorphic.
When elements are referenced at at least one other element in the model the non-formula depiction should be preferred.
Therefore formulas can only be used without loss of information when the participating elements are neither EL-categorized nor referenced at any other point of the model.
\end{description}

\noindent
More details and visual examples for this, especially the latter, will follow in the next section, where we will finally go into the graphical aspect of these solutions.



\section{Structure and Elements}
\label{gsl_elements}
The main structure of the notation is graph-based.
It is adopted from \cite{Amthor18} and extended with additional features (solutions) from the previous section.
Depicting EL categories by horizontal alignment or with the help of dashed boxes is removed and replaced with coloring.



\subsection{Color Legend}
Any model now needs a legend (or reference to a legend) to show the assignment of colors to the corresponding EL categories.
For $m=1$ we have six different categories and therefore six colors.
Using the primary colors (red, blue, yellow) and their mixtures (green, orange, purple) maximizes the visual differences and avoids visual misunderstandings.
Brightening up the colors is a common method to make the coloring less prominent and the notation less optical aggressive due to its higher contrast to (black) text, lines and object's outlines.
A suggested color selection is shown in figure \ref{fig:legend}.
All models in this document are based on this color legend, therefore it is not necessary to depict it again in following figures.
For multiple levels of indirection ($m>1$) the color legend needs to be extended accordingly.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.45]{../figures/chapter3/legend.png}
	\caption{Suggested legend for EL categorization coloring}
	\label{fig:legend}
\end{figure}



\subsection{Sets}
Regarding their appearance sets remain mostly the same (see figure \ref{fig:set}).
The enclosed area of a set can now be colored to indicate category memberships.
Its name and internal definition depicted by a formula are optional.
The formula allows to mathematically express the internal definition of a set without the need of graphically modeling them.
With this option the complexity of the model can be limited where needed.
A user can now decide case-specifically whether certain elements are relevant to be modeled graphically or mathematically for the sake of expressiveness/simplicity.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter3/set.png}
	\caption{Set element layout}
	\label{fig:set}
\end{figure}

\noindent
The depiction of subsets is unaltered as well: They can be drawn as smaller sets inside their superset.
They can be colored individually to their superset.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../figures/chapter3/subsets.png}
	\caption{Set element with differently categorized subsets}
	\label{fig:subsets}
\end{figure}

\noindent
Indicating a membership to two or more categories is done by \textit{multi-coloring} the unclosed area of an element.
Multi-coloring uses uniformly divided circular sectors to partition the coloring area.

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.275]{../figures/chapter3/set_multicolor.png}
	\caption{Sets with multiple category memberships}
	\label{fig:set_multicolor}
\end{figure}



\subsection{Relationships}
\label{relationships}
Simple arrows depict mappings, double-sided arrows depict relations and dashed-lined arrows depict constraints -- unchanged.
Power sets can be expressed using annotations as seen in figure \ref{fig:relationship_annotation}.
In many cases sets are used in their unaltered form and no extra expression is needed.
In this case the annotation is not depicted to reduce redundancy.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../figures/chapter3/relationship_annotation.png}
	\caption{Relation $R \subseteq A \times 2^B$}
	\label{fig:relationship_annotation}
\end{figure}

\noindent
Mappings and relations can be extended with additional rhombus shapes to specify the type of operation.
So in contrast to the original notation we can now specify not just a relationship type (mapping, relation, constraint), but also how its sets are connected.

Many -- especially bright -- colors like yellow do not have a high contrast to their background (generally white), so colored thin objects like lines or object's outlines are hard to see.
So, to enhance the visual perception, we do not want to use coloring directly on those objects, but continue using black arrows and lines to maximize the contrast in combination with a white background.
To still be able to categorize relationships by color, relationship elements need a sufficient enclosed area that can properly represent its color.
Relations already have such area: The rhombus shape holding the operator symbol.
Relations always have at least one operator, mappings do not.
So for mappings we introduce a rectangle shape to obtain a sufficient coloring area.
A Mapping also has its names encapsulated into this rectangle.
The rectangle shape can be dynamically resized to fit its content.
A relation holds its name in its rhombus shape above its operator symbol (see figure \ref{fig:relationships}).

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-1cm]{../figures/chapter3/relationships.png}
	\caption{Relationship types}
	\label{fig:relationships}
\end{figure}

\noindent
Handling two or more combined sets is possible now as well as any order of operations as depicted in figure \ref{fig:relationship_operation_2args} and \ref{fig:relationship_operation_3args}.
When having multiple different operators for one relationship the name of the relationship itself is always encapsulated in the last element.

Rhombus shapes are primarily for depicting relations, but can also depict pure operators, too.
These do not necessarily need a name or identifier.
Also they can be left uncategorized/uncolored.

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.35]{../figures/chapter3/relationship_operation_2args.png}
	\caption{Mapping with multiple participating sets $f:A \times B \rightarrow Z$}
	\label{fig:relationship_operation_2args}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.35]{../figures/chapter3/relationship_operation_3args.png}
	\caption{Mapping with multiple different operations $f:A \times ( B \cup C ) \rightarrow Z$ }
	\label{fig:relationship_operation_3args}
\end{figure}

\noindent
In rare cases the order of elements participating in \textit{one} operation is relevant for the operation itself (e.g.~$\setminus$ for set substraction).
Such order or participants can be indicated with roman numerals as annotations.
An example for this is depicted in figure \ref{fig:operation_order}.

\begin{figure}[!htb]
	\centering
	\includegraphics[scale=0.35]{../figures/chapter3/operation_order.png}
	\caption{Indicating the order of sets for an operation}
	\label{fig:operation_order}
\end{figure}

\noindent
With the solutions and methods described in this section the graphical EL notation allows a modular construction of mathematical terms.



\subsection{Depiction Variants}
\label{variants}
There are depiction variants available to adapt the level of detail if needed or wished.
An example for subset depiction was already shown in figure \ref{fig:subsets}.
As proposed in \textit{Solution to Problem 5: Visual Complexity} (section \ref{improving_notation}, page \pageref{improving_notation}) subsets can also be depicted externally.
Figure \ref{fig:subsets_alternative} shows such variant.
It is semantically equivalent to figure \ref{fig:subsets}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../figures/chapter3/subsets_alternative.png}
	\caption{External subset depiction variant}
	\label{fig:subsets_alternative}
\end{figure}

\noindent
The internal definition of sets like $P = 2^{O \times OP}$ in $RBAC_0$ (see definition \ref{definition:RBAC} on page \pageref{definition:RBAC}) can be modeled graphically, but in cases like this, where all sets in the formula are not referenced at any other point in the model, the formula depiction is a legitimate choice.
Figure \ref{fig:subsets_formula} depicts the example from above.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.43]{../figures/chapter3/subsets_formula.png}
	\caption{Set element with its internal definition as formula}
	\label{fig:subsets_formula}
\end{figure}

\noindent
For individual benefits and usage of such variants see \textit{Solution to Problem 5: Visual Complexity} (section \ref{improving_notation}, page \pageref{improving_notation}).



\subsection{Comments on the Model Structure}
\label{comments_on_model_structure}
The modular graph we developed is now able to describe EL models graphically.
On an basic level the graph is structured in nodes and edges, just like an mathematical graph.
Based on this one might assume this being a bipartite graph.
But due to mappings being depicted with the help of a graphical shape, but not being sets at all, this is not the case.

The reason for this is that mappings must provide a surface to hold a color to be able to get categorized properly.
For this they have to be encapsulated in a geometrical shape just like the other elements, too.
A depiction alternative would be to not position the shape and its content in the middle of its arrow, but above or below it with at least one point of contact.
But due to lines and arrows not being limited to run straight horizontally or vertically, this might induce confusion in distinguishing multiple adjacent elements in large models with less space.



\section{Example}
\label{gsl_example}
To showcase that we can now model all relevant aspects of EL -- even for $m>1$ (see \textit{hierarchical EL}, section \ref{HEL}) -- we want to depict the HIX example with added role hierarchy \cite{Amthor18} uses as example with our newly developed notation.

\noindent
The example refers to the example depicted in section \ref{EL}, but with one additional level of indirection $m=2$.
To depict the additional level of indirection ($LS_2, LA_2$), the color legend has to be expanded accordingly.
It corresponds to its original depiction in figure \ref{fig:EL_diagram} and can be compared to it to observe the changes we introduced in this section.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-4cm]{../figures/chapter3/HIX.png}
	\caption{HIX example with $m=2$ \citep{Amthor18}}
	\label{fig:HIX}
\end{figure}

\noindent
The layout was adapted to better compare both figures, but is not limited to this particular form as its former notation was.
By eliminating the need of spatial alignment and by introducing colors for categorizing, models now can be arranged freely regarding its graph layout.
As a result this allows for automatic layouting models in the software editor (section \ref{editor_design} and \ref{implementation}) according to certain needs (e.g.~compact, hierarchical, horizontally/vertically).

For another example ($RBAC_3$) see figure \ref{fig:RBAC96_example} in the appendix on page \pageref{fig:RBAC96_example}.

%\section{Visualization on a Higher Level of Abstraction}
%\label{higher_abstraction_level}



\section{Summary}
\label{gsl_summary}
In this chapter we analyzed the graphical notation by \cite{Amthor18} and isolated its problems, which make it ambiguous and therefore inappropriate as a tool for the process of EL.
We proposed suitable solutions to solve those problems.
The solutions are developed and derived from established graphical notations where possible and considered gestalt laws to enhance its visual quality and handling.
One aspect among others was to find appropriate break points where graphical modeling was not reasonable anymore to depict information and where mathematical expression are used instead.

Finally a notation is obtained that is capable of depicting the same information that its textual/tabular forms can.
The following task will be to design and develop an appropriate software prototype to being able to work with this notation.





\cleardoublepage
\chapter{Design: EL Editor}
\label{editor_design}
One part of this thesis is to implement a prototype editor in order to be able to work with the graphical notation developed in the previous chapter.
The editor should support the process of EL as well as visualize the results of the EL process.
This chapter will present the requirements as well as the resulting GUI design of the editor including its general structure and control concept.
This will serve as base for the implementation in the subsequent chapter \ref{implementation}.




\section{Requirements}
\label{editor_requirements}
The editor is a graph-based prototype software editor to construct EL models graphically.
It consists of two main sections: The graph section and the table section.
The graph section is the primary section and provides a drawing area and tools to view and construct an EL model graphically.
The table presents all model data in a secondary text-based compact form.



\subsection{Object Manipulation}
\label{req_object_manipulation}
The editor provides functions for basic navigation like moving the viewport or zooming.
The graph section allows fast and local object manipulation with the mouse or touch controls.
Most operations are therefore cursor-based or provided through a context menu.

The basic elements are set, relation/rhombus, mapping and constraint.
All those elements can be created, selected, re-positioned and deleted.
All elements have unique identifiers and several type-dependent properties (e.g.\ name).
The editor allows viewing and changing those element properties.
One essential property is \textit{EL category memberships}, a list with all categories the element is categorized into.
Some element properties are depicted in the graphical EL model, while others are depicted in the table tab only (optional; not essential for the EL aspect).

The editor provides arrow drawing between elements to connect them.
Arrows can be deleted, annotated and inverted in its direction.



\subsection{Management}
\label{req_management}
Besides its drawing section the editor provides a function to generate and export a XML-based scheme (\textit{Entity Labeling Markup Language} \citep{Amthor18}) from its current model.
Additional graphical information (e.g.\ positions) are integrated into the same file with additional tags.
A file in the mentioned format can also be imported.
An existing file not exported from this editor does not have any graphical information - therefore elements have to be manually adjusted regarding those properties after importing.

Per default the EL categories are set to the EL categories for $m=1$, but are modifiable.
They are associated with a specific model, so they are also part of importing/exporting.
A category consists of its name, its color and its XML tag.
The category/color legend is generated automatically from the categories.

Optional settings can modify the depiction of the model on several levels, e.g.\ show/hide annotations or enable/disable colors to dynamically adapt the view complexity to individual needs.



\section{GUI}
\label{editor_gui}
This chapter covers the \textit{graphical user interface} of the editor.
In the first section \ref{editor_structure} a general overview of the window's sections is given.
Section \ref{GUI_concept} then gives insight into the control concept and work-flow of the editor.
Furthermore section \ref{editor_extensions} will suggest some advanced features.

% ein/ausblendbar wegen Übersicht, 
% "Filter-layers" (visibility filter): Categories, Annotations, Internal structure formulas, Names/Identifiers, Operation rhombus, all relationships, mappings/relations/constraints

%  categorizing, models now can be arranged freely regarding its graph layout <--- auto-layouting options!

\subsection{General Structure}
\label{editor_structure}
Figure \ref{fig:GUI_tab1_graphical} shows the application with its separation into 4 main sections.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-5cm]{../figures/chapter4/GUI_layout.png}
	\caption{Window sections}
	\label{fig:GUI_layout}
\end{figure}

\noindent
The two sections at the top (tabs, general) will always remain visible, while the sections underneath will dynamically change depending on the tab selected in the tabs section.
The section at the top left-hand side is the \textit{tabs} section.
There are two tabs to switch between: The \textit{graphical} and the \textit{table} tab.

At the top right-hand side of the window is the \textit{general} section.
Two buttons allow importing and exporting a model.
Next to them is a gear button to open the application's settings (more on this see \ref{editor_extension_settings}).



\subsection{Graphical Tab}
\label{editor_graphical}
The graphical tab is the default view.
It contains the drawing area underneath as well as the side section to the right-hand side of the drawing area.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter4/GUI_tab1_graphical.png}
	\caption{Graphical tab}
	\label{fig:GUI_tab1_graphical}
\end{figure}

\noindent
The \textit{drawing area} is the main section of the application and serves as surface for all graphical elements.
The corresponding concept and work-flow will be described in section \ref{GUI_concept}.
In the bottom left corner it shows the color legend for EL categories.
It is, just like the zooming buttons in the bottom right corner, an overlay widget and is floating above the drawing content.

On the right-hand side of the window is the \textit{side section}.
After selecting an element on the drawing area this section show the element's properties and values.
The structure of the properties section will alter according to the type of element selected (e.g. relations will have a \textit{operation} field, while sets do not).
To set the desired values suitable common input widgets (text field, drop-down menu, check box list) are provided.



\subsection{Table Tab}
\label{editor_table}
When switching to the \textit{table} tab in the tab section the drawing area and side section will be replace with a single section containing a table (see figure \ref{fig:GUI_tab2_table}).
The table shows the current information of an EL model (modeled in the graphical tab) in an alternative tabular form sorted by EL categories.
It is based on the tabular form for results of EL-based model engineering \cite{Amthor18} uses (see figure \ref{fig:EL_table} on page \pageref{fig:EL_table}).

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter4/GUI_tab2_table.png}
	\caption{Table tab}
	\label{fig:GUI_tab2_table}
\end{figure}



\section{Control Concept}
\label{GUI_concept}
To obtain a clean and modern appearance the GUI will not have any distracting or redundant functions or menus.
This will have the effect of reducing the visual cognitive load for (especially new) users.
As a consequence of this decision there is no menu bar on top.
This leads to more space for the drawing area and therefore for the graphical EL model going to be created.

To achieve a fast work-flow functions should be case-specific and accessible directly at the point of interest, in this case close to the graphical elements.
Common functions like creating elements for sets, mappings, relations, constraints are therefore accessible through the context menu (right click on mouse or touch-and-hold on touch-based devices).
After selecting an element the context menu changes accordingly when called and allows deleting or duplicating elements.
Also the side section right to the drawing area will change according to the current element selection in the drawing area.

Drawing connecting lines between two elements (e.g. set and mapping) can be done by drag and drop.
After added such connection it can be adjusted within the properties section regarding its type (line/arrow), direction and annotation.

Navigating the drawing area is primarily done with the mouse.
Moving the drawing area's view is done with holding down the right mouse button (touch domain: two fingers touch-and-hold), zooming with the mouse wheel (touch domain: pinch-in/out).
Alternatively a + and - button at the bottom right corner of the drawing area will allow zooming when no mouse wheel is available.

%This concept not being necessarily self-explaining to everyone a short 3-step mini tutorial should be available.



\section{Advanced Features}
\label{editor_extensions}
The following proposed functions are treated as optional features.

\subsection{View Settings}
\label{editor_extension_settings}
A gear button in the general section opens the settings inside the side section (see figure \ref{fig:GUI_extensions}).
The setting's subsection \textit{View} allows toggling the visibility of several model properties (e.g. show/hide annotations).
This lets the user adapt the view to the complexity of the depicted model and to the desired level of detail.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{../figures/chapter4/GUI_extensions.png}
	\caption{View settings}
	\label{fig:GUI_extensions}
\end{figure}

\noindent
A classical approach of adjusting the editor's view could be a top menu with a view section containing several items to enable/disable (state indicated with a checkmark).
This menu would overlap the depicted model in the drawing area and the menu has to be reentered and navigated through after every change.

The proposed settings section allows a fast configuration of the desired level of detail with toggle buttons.
The changes can be instantly observed in the depicted model nearby.
This behavior supports instant gratification (see principle 2 of usability \citep{Tidwell11}, section \ref{usability}).
Several changes can be made fast without the need of reentering or renavigating.
This also supports satisfiscing (principle 3 of usability \citep{Tidwell11}), because the user can easily use trial-and-error to find the configuration he needs.

%\subsection{Default relationship}
%\label{editor_extension_default_relationship}
%A toggle button in the settings section \textit{or} a small drop-down menu inside a corner of the drawing area (see figure \ref{fig:GUI_extensions}) allows setting a default relationship type (mapping or relation).
%This is not necessary per se, due to being able to draw an arbitrary relationship and change it to a mapping/relation in the properties section, but this may enhance the working speed when drawing multiple non-default relationship elements.

\subsection{Redirect Edges}
\label{editor_extension_redirect_edges}
Until now edges are drawn between two elements and can not be altered in their position or form.
Sometimes it is necessary to redirect edges for a better visual overview.
Examples for this are the edges of \textit{RH} and \textit{pa} in figure \ref{fig:HIX} on page \pageref{fig:HIX}.
For this purpose edges can have a handle in the middle, which appears after selecting them (see figure \ref{fig:redirect_edge}).
Dragging and dropping the handle will redirect the edge through the new position of the set handle.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-5cm]{../figures/chapter4/redirect_edge.png}
	\caption{Redirect edge}
	\label{fig:redirect_edge}
\end{figure}





\cleardoublepage
\chapter{Implementation}
\label{implementation}
This chapter is about the implementation of the EL editor described and designed in the previous chapter.
This chapter does not aim at explaining the source code itself or listing all functions, but at giving an overview on the implementation's structure and at giving some detailed insights towards its core functionality.

For this we will first take a look at the framework \textit{Qt}, the implementation base for this editor, in section \ref{implementation_base}.
After that the general structure of the implementation itself will be explained in section \ref{implementation_structure}.
In the subsequent sections \ref{implementation_graphicsscene} and \ref{implementation_side_section} more details on two prominent GUI sections are given.
Section \ref{implementation_events} then discusses cursor-based event handling of the implementation.
Finally in the last section of this chapter the concept for importing and exporting data from and to a XML-based file format for persistent storage is explained in section \ref{implementation_importexport}.



\section{Implementation Base}
\label{implementation_base}
Implementation base for this editor is Qt.
Qt is a framework/class library for GUI-based cross-platform software development and supports all established operating systems like Linux, Windows, macOS, Android and iOS.
%Qt has a dual licence model, that uses a proprietary license for commercial projects and the \textit{GNU General Public License} for open source projects.

Qt uses its MOC (meta object compiler) preprocessor to extend C++ with additional features.
One of these are signals and slots, an easy concept for an event-driven program flow and for enabling simple communication between objects.
One part of Qt is its IDE \textit{Qt Creator}, which was used in context of this work.
The main advantage in using Qt Creator rather than any other development environment is its integrated design mode, which allows quick prototyping a layout graphically, which then can be used and refined in the code later on.

Furthermore Qt is used, because it heavily focuses on GUI development and has powerful classes to implement graph-based editors with custom items like this EL editor.



\section{GUI Structure}
\label{implementation_structure}
This section gives an overview of the implementation's structure of the EL editor.
The main structure is heavily based on Qt's class structure for the classes we chose to use.
Their relationships are depicted as UML class structure in figure \ref{fig:Qt_class_structure}.

\begin{mdframed}[style=mystyle,frametitle=Note]
The full structure is more complex than shown in the following i.a.\ due to layout and auxiliary containers for aligning and managing widgets.
For the purpose of this chapter we will reduce complexity to focus on selected parts.
\end{mdframed}

\noindent
The \texttt{QMainWindow} is the default window Qt creates after program start.
It is parent to all other widgets.
The \texttt{MainWindow} contains a \texttt{QTabWidget} with two tabs: \texttt{QGraphicsView} and \texttt{QTabsWidget} (analogue to its design in section \ref{editor_structure}).

\begin{figure}[htb]
	\centering
	\includegraphics[scale=1]{../figures/chapter5/Qt_class_structure.png}
	\caption{Qt class structure}
	\label{fig:Qt_class_structure}
\end{figure}

\noindent
\texttt{QGraphicsView} is a viewport and implements all view-related functions such as zooming.
It can hold one \texttt{QGraphicsScene} (one model) at a time to display.
\texttt{QGraphicsScene} holds and manages all graphical items (\texttt{QGraphicsItem}) and implements interactions with them (e.g.\ positioning or moving).

For the table view of the model's data Qt's \texttt{QTableWidget} is used.
Whenever the tab is changed to the table tab \texttt{QTableWidget} is build up/updated with the current data available in \texttt{QGraphicsScene}.

The following sections cover two essential GUI sections of the editor: The \textit{Graphics Scene} in section \ref{implementation_graphicsscene} and the \textit{Side Section} in section \ref{implementation_side_section}.



\subsection{Graphics Scene}
\label{implementation_graphicsscene}
\texttt{GraphicsScene} is the central widget for holding and managing all graphical elements.
Figure \ref{fig:class_diagram} shows the \texttt{GraphicsScene} class and its children classes in a more detailed form.
In the actual implementation almost all classes are derived from corresponding Qt classes and are extended by additional features.
One example for this is \texttt{GraphicalElement}, which inherits from \texttt{QGraphicsItem} and adds private attributes such as EID.

\noindent
\texttt{GraphicsScene} implements i.a. functions to add new elements to the scene.
It also holds a list of all \textit{EIDs} and a list of all (potential) element \textit{categories}.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth+1cm]{../figures/chapter5/class_diagram.png}
	\caption{Class diagram}
	\label{fig:class_diagram}
\end{figure}

\noindent
The categories list is initialized for an empty model with the EL categories for $m=1$ (see section \ref{EL} of the fundamentals chapter), but can be modified by the user while runtime or by importing projects.
The \texttt{GraphicsScene} also holds all model-specific EL meta information such as the corresponding XML tag identifiers and colors (not shown in figure \ref{fig:class_diagram}).

For the internal organization all graphical elements in the scene have an unique \textit{element identifier} (\texttt{EID}) to address them.
The \texttt{EID} of an item is not allowed to change during its lifetime.
The allocation of \texttt{EID}s is simply implemented as incrementing integers.
But after deleting an element the corresponding \texttt{EID} is free and can be reallocated to new objects again.

\begin{mdframed}[style=mystyle,frametitle=Note]
The \texttt{EID} differs from the attribute \texttt{identifier}.
The latter is the identifier of the EL element, e.g.\ \textit{U} for a \textit{Users} set.
Both have to be unique, but unlike the \texttt{identifier} attribute the \texttt{EID} is not allowed to change after set once.
\end{mdframed}

\noindent
All four element types that can be added to the scene (\textit{Set}, \textit{mapping}, \textit{relation} and \textit{constraint}) inherit from \texttt{GraphicalElement}.
\texttt{GraphicalElement} holds all attributes all element types have in common (e.g.\ \texttt{EID}).
The four element types themselves add exclusive attributes (e.g.\ \textit{formula} in \texttt{Set}).

\texttt{QGraphicsTextItem} is used for displaying any text inside the  graphical elements.



\subsection{Side Section}
\label{implementation_side_section}
The side section displays information of the selected element in \texttt{GraphicsScene}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.9]{../figures/chapter5/sidesection.png}
	\caption{Side section: Item properties}
	\label{fig:sidesection}
\end{figure}

\noindent
In the top right corner the element type is indicated.
For interacting with element's data common interaction design patterns (see section \ref{design_patterns}) are used.
All \texttt{QString}-typed attributes are accessible with the help of classical text edit widgets.
Furthermore the description text edit widget is multi-lined.
The element's categories are depicted with a list of checkable entries.
After the horizontal line the element-exclusive attributes are listed (in case of figure \ref{fig:sidesection} the set's formula).
Any changes in the side section widgets will be instantly (with every key stroke) propagated to the element's attributes.



\section{Event Handling}
\label{implementation_events}
Cursor-based behavior like selecting items or drawing lines and arrows with drag and drop is implemented with the help of Qt's \texttt{mousePressEvent}, \texttt{mouseMoveEvent} and \texttt{mouseReleaseEvent} functions.
These are implemented on several levels.
After such event is triggered the top-most visible item at the cursor's position (text items included) receives the event first.
After reacting to the mouse event, the item can pass the event on to its underlying items or discard it.

Calling the context menu (\texttt{contextMenuEvent}) follows the same concept.
Currently there are two layers the context menu is implemented in and callable from: \texttt{GraphicalElement}, which is triggered when an element is clicked or \texttt{GraphicsScene}, which is triggered when free space of the scene is clicked.
Figure \ref{fig:contextMenu_item} shows the context menu of an item in the scene.

%\begin{figure}[htb]
%	\centering
%	\includegraphics[]{../figures/chapter5/contextMenu_scene.png}
%	\caption{Context menu after clicking empty space in the scene}
%	\label{fig:contextMenu_scene}
%\end{figure}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.9]{../figures/chapter5/contextMenu_item.png}
	\caption{Context menu after clicking an item}
	\label{fig:contextMenu_item}
\end{figure}

\noindent
The menu allows triggering actions to change element properties that are graphically displayed inside the element as well as category assignments.
The actual components of this context menu depends on the element's type (e.g.\ shows \textit{Change formula} just for sets).

After selecting a \textit{Change} action the corresponding text field of the elements gets into edit mode and reacts to user input until the focus is lost (clicking somewhere else).



\section{Import and Export}
\label{implementation_importexport}
The import and export functions \texttt{XMLtoScene} and \texttt{sceneToXML} are implemented in \texttt{MainWindow}.
Due to not having a strict separation in view and model (regarding the popular architectural pattern \textit{Model View Controller}) the element's model and visual properties and functions are all located inside its instance itself.
To export a model into a structured format we can not iterate through all items in \texttt{GraphicsScene}, because this would also include also texts and edges.
However we can iterate through the \texttt{GraphicsScene}'s list of \texttt{EID}s to find all valid elements in \texttt{GraphicsScene} to then get all relevant data of the element according to its element type.

For the file handling Qt's \texttt{QFile} and \texttt{QFileDialog} classes are used, for dealing with XML in particular the \texttt{QXmlStreamReader} and \texttt{QXmlStreamWriter} classes.
The XML scheme follows the \textit{Entity Labeling Markup Language} specification in \cite[appendix C.2, p.~196]{Amthor18}.



%\section{Summary}
%\label{implementation_importexport}
%This chapter



\cleardoublepage
\chapter{Evaluation}
\label{evaluation}
%kritik immer fehlende isomorphe abbildung -> begriff "isomorphie" als entwurfskriterium
%auch als steilvorlage für eval



\section{Graphical Specification Language}
\label{evaluation_gsl}

\section{Editor}
\label{evaluation_editor}


\cleardoublepage
\chapter{Conclusion}
\label{conclusion}
\blindtext



\cleardoublepage
\chapter{Summary}
\label{summary}
\blindtext



% Appendix
\cleardoublepage
\tocentry{Appendix}
\renewcommand{\thesection}{\Alph{section}}
\markboth{Appendix}{}
\counterwithin{figure}{section}
\chapter*{Appendix}
\label{appendix}
\section{Additional examples}
The following figure depicts the $RBAC_3$ model in the graphical notation developed in chapter \ref{gsl}.
For its definition see definition \ref{definition:RBAC} on page \pageref{definition:RBAC}.

\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth-1cm]{../figures/chapter3/RBAC96_v1.png}
	\caption{$RBAC_3$ example}
	\label{fig:RBAC96_example}
\end{figure}



% Literaturverzeichnis
\cleardoublepage
\DeclareRobustCommand{\citeext}[1]{\citeauthor{#1}~\cite{#1}}
\bibliographystyle{plainnat}

\bibliography{other/db}

\tocentry{Bibliography}





\end{document}